<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="description" content=""><meta name="viewport" content="initial-scale=1"><meta name="keywords" content=""><title>Kata Countdown word game</title><link rel="stylesheet" media="all" href="/css/screen.css"><link data-require="leaflet@0.7.3" data-semver="0.7.3" rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.3/leaflet.css"/></head><body class="post--page"><header class="hdr hdr--post"><div class="column column__center column__12-of-12 column__8-of-12--small column__9-of-12--medium hdr--cont"><nav class="hdr--nav"><ul><li><a href="/" href="" title="">Home</a></li><li><a href="posts.html" href="" title="">Blog</a></li><li><a href="mailto:info@willforsyth.co.uk" href="" title="">Contact</a></li></ul></nav><div class="hdr--title"><h1 class="">Kata Countdown word game</h1></div></div></header><div class="sidebar grid column column__12-of-12 column__4-of-12--small column__3-of-12--medium"><a class="back" href="/posts.html" title="back">Back</a></div><main class="column column__12-of-12 column__8-of-12--small column__9-of-12--medium column__6-of-12--large"><article class="post__main" role="main"><section class="post__content"><p>We set ourselves a kata as part of out monthly meeting, to create a <a href="https://en.wikipedia.org/wiki/Countdown_(game_show)">countdown word game</a> from the UK gameshow. We could use any language we liked. The front end guys used <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript">javascript</a> and the back end guys used <a href="https://golang.org/">go</a> and some used <a href="http://php.net/">php</a>.</p><h3>Here is my approach</h3><p>My idea was to get the list for letters and compare them against the words in the json. If the words contained the letters return the words. The if the words only container the letters I knew these would be the words I need. Save the key for these so I could then return the words. That was the idea anyway. After lots of research I decided to use <a href="http://underscorejs.org/">underscore.js</a> as it had this nice function <a href="http://underscorejs.org/#intersection">intersection</a>. The docs says “Computes the list of values that are the intersection of all the arrays. Each value in the result is present in each of the arrays.” So this was exactly what I wanted.</p><ol><li>Get a word list to use to compare. <a href="https://www.npmjs.com/package/word-list">npm word list</a></li><li>Access the word list and create a list of letters to use (add this into input later)</li><li>Using a for loop, loop over the objects and get the kets and the values.</li><li>Save the values to a variable.</li><li>Get the length of the values.</li><li>Using the <a href="http://underscorejs.org/#intersection">intersection</a> function compare my letters against the list of words.</li><li>If the length of the of the word with the matching items is the same length as a word in the dictionary it must be a full word, and this is what i want to return.</li><li>Find the key of the matching words.</li><li>Return the key reference which is the matching words.</li></ol><div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">// get the words</span>
<span class="kd">var</span> <span class="nx">wordsJson</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;word-list-json&#39;</span><span class="p">);</span>

<span class="c1">// add in some letters</span>
<span class="kd">var</span> <span class="nx">letters</span> <span class="o">=</span><span class="p">[</span><span class="s1">&#39;b&#39;</span><span class="p">,</span><span class="s1">&#39;e&#39;</span><span class="p">,</span><span class="s1">&#39;d&#39;</span><span class="p">,</span><span class="s1">&#39;n&#39;</span><span class="p">,</span><span class="s1">&#39;e&#39;</span><span class="p">,</span><span class="s1">&#39;r&#39;</span><span class="p">,</span><span class="s1">&#39;s&#39;</span><span class="p">,</span><span class="s1">&#39;h&#39;</span><span class="p">];</span></code></pre></div><div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">// for loop to get keys and values</span>
  <span class="k">for</span><span class="p">(</span><span class="nx">key</span> <span class="k">in</span> <span class="nx">wordsJson</span><span class="p">)</span> <span class="p">{</span>

      <span class="c1">// save the values to prop</span>
      <span class="kd">var</span> <span class="nx">prop</span> <span class="o">=</span> <span class="nx">wordsJson</span><span class="p">[</span><span class="nx">key</span><span class="p">];</span>

      <span class="c1">// Get the length of the values</span>
      <span class="kd">var</span> <span class="nx">wordsLength</span> <span class="o">=</span> <span class="nx">prop</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>

      <span class="c1">// using underscore find all the words that contain the letters</span>
      <span class="kd">var</span> <span class="nx">matchingLetters</span> <span class="o">=</span> <span class="nx">_</span><span class="p">.</span><span class="nx">intersection</span><span class="p">(</span><span class="nx">prop</span><span class="p">,</span> <span class="nx">letters</span><span class="p">);</span>

      <span class="c1">// if the length of the of the word with the matching items is the same</span>
      <span class="c1">// length as a word in the dictionary it must be a full word</span>
      <span class="k">if</span><span class="p">(</span><span class="nx">matchingLetters</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="nx">prop</span><span class="p">.</span><span class="nx">length</span><span class="p">){</span>

        <span class="c1">// find the key of the matching words</span>
        <span class="kd">var</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">matchingLetters</span> <span class="o">&amp;&amp;</span> <span class="nx">key</span><span class="p">;</span>

        <span class="c1">// log it out</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">wordsJson</span><span class="p">[</span><span class="nx">result</span><span class="p">]);</span>
      <span class="p">}</span>
  <span class="p">}</span></code></pre></div><h4>Improvements:</h4><p>Currently this method wont compare double letters :-(</p></section><footer><a class="post-prev" href="/javascript/2016/06/13/javascript-map.html">&laquo; Interactive map</a></footer></article></main><script data-require="leaflet@0.7.3" data-semver="0.7.3" src="http://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.3/leaflet.js"></script><script src="/scripts/fuse-search.js"></script><script src="/scripts/fuse-search-two.js"></script><script src="/scripts/common.js"></script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-78935405-1', 'auto');
  ga('send', 'pageview');</script></body></html>