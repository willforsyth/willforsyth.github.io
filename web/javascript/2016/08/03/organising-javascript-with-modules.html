<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="initial-scale=1">
    <link rel="prefetch" href="/imgs/backgrounds/sky.jpg">
    <!-- Begin Jekyll SEO tag v2.0.0 -->
<title>Organising your javascript with modules - Willforsyth</title>
<meta property="og:title" content="Organising your javascript with modules" />
<meta name="description" content="Organising your javascript with modules, using closures, private functions and init." />
<meta property="og:description" content="Organising your javascript with modules, using closures, private functions and init." />
<link rel="canonical" href="willforsyth.co.uk/javascript/2016/08/03/organising-javascript-with-modules.html" />
<meta property="og:url" content="willforsyth.co.uk/javascript/2016/08/03/organising-javascript-with-modules.html" />
<meta property="og:site_name" content="Willforsyth" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2016-08-03T00:00:00+01:00" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@willforsyth" />
<meta name="twitter:creator" content="@Will Forsyth" />
<script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "BlogPosting",
    "headline": "Organising your javascript with modules",
    "datePublished": "2016-08-03T00:00:00+01:00",
    "description": "Organising your javascript with modules, using closures, private functions and init.",
    "url": "willforsyth.co.uk/javascript/2016/08/03/organising-javascript-with-modules.html"
  }
</script>
<!-- End Jekyll SEO tag -->
    <title>Organising your javascript with modules</title>
    <link rel="stylesheet" media="all" href="/css/screen.css">
    <link data-require="leaflet@0.7.3" data-semver="0.7.3" rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.3/leaflet.css" />
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@willforsyth">
    <meta name="twitter:title" content="Organising your javascript with modules">
    <meta name="twitter:description" content="Organising your javascript with modules, using closures, private functions and init.
">
    <meta name="twitter:image" content="http://willforsyth.co.uk">
    <meta name="theme-color" content="#fbc680">
</head>


<body class="post--page">
  <header class="hdr hdr--post">
    <nav role="navigation">
  <div class="column logo">
      <a href="/" data-type="page-transition" title="Go to home page" tabindex="2">
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1190.6 841.9" enable-background="new 0 0 1190.6 841.9"><g fill="#FAC580" stroke="#525D7D" stroke-linejoin="round" stroke-miterlimit="10"><path stroke-width="35.749" d="M589.2 759.4l-185.9-.2-54.6-78-58-134.8-47.7-143.5s-85.9-104.7-121.5-242.3c-26.7 3-71.2 9-71.2 9l47.5-140.7 261.1 20.9s91 85.8 101.9 141.6h128.5"/><path stroke-width="35.406" d="M588.9 759.4l182.3-.2 53.6-78 56.8-134.8 46.9-143.6s84.3-104.7 119.2-242.3c26.2 3 69.8 9 69.8 9l-46.6-140.6-256 20.9s-89.2 85.8-99.9 141.6h-126"/></g><path fill="#DF984A" stroke="#525D7D" stroke-width="35.571" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M1020.1 162.6l-233.1-69.7 23-44.5s107.4-45.1 258.4-19.2c32.1 58.7 71.5 153 71.5 153l-119.8-19.6z"/><path fill="#DF984A" stroke="#525D7D" stroke-width="35.901" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M105.1 152.4l245.6-91.4-254.1-34.8-43.6 133.1z"/><path stroke="#525D7D" stroke-width="30.664" stroke-linecap="round" stroke-miterlimit="10" d="M925.7 397.4s-60.3-116.6-99.6-140" fill="none"/><path stroke="#525D7D" stroke-width="35.901" stroke-linecap="round" stroke-miterlimit="10" d="M242.9 388.7s35.7-76.1 91.6-119.9" fill="none"/><ellipse fill="#525D7D" cx="402.2" cy="442" rx="61.8" ry="59.8"/><ellipse fill="#525D7D" cx="765.1" cy="440.6" rx="59.8" ry="59.7"/><path stroke="#525D7D" stroke-width="35.901" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M497.4 349.3s-35.9-34.7-92-14.5M801.8 321.3s-46.4-18.4-90.6 21.6" fill="none"/><path stroke="#525D7D" stroke-width="23.934" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M311.1 219.6c-3-1.5-45.6-81.5-45.6-81.5M876.5 206.6l26.3-51.3" fill="none"/><circle opacity=".42" fill="#fff" cx="406.1" cy="441.8" r="13.1"/><circle opacity=".42" fill="#fff" cx="761" cy="440.6" r="14"/><path fill="#DF984A" stroke="#525D7D" stroke-width="23.097" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M428.3 777.9s206.7 82.7 321.1-13.1l-151.4-32.2-169.7 45.3z"/><path fill="#DF984A" stroke="#525D7D" stroke-width="34.981" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M589.2 482.4c23.7 1.1 46.4 11.8 78.9 41.5 28.4 45.9 93.3 167.4 100.9 237.2-52.7 31.7-143 37.8-179.4-56"/><path fill="#DF984A" stroke="#525D7D" stroke-width="35.438" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M590.1 482.4c-24.4 1.1-46.4 11.6-79.8 41.2-29.2 45.8-96.1 167.2-103.9 237 54.1 31.8 146.7 38 184.2-55.7"/><path fill="#525D7D" stroke="#525D7D" stroke-width="11.967" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M566.5 688s33.9 32.2 61 0l32.2-47.4s5.1-47.4-20.3-50.8c-88.1 8.5-99.9 0-99.9 0s-27.1 33.9 0 66l27 32.2z"/><ellipse transform="matrix(.997 -.078 .078 .997 -47.549 48.305)" opacity=".42" fill="#fff" cx="592.8" cy="631.1" rx="13.4" ry="6.9"/><path fill="#fff" stroke="#525D7D" stroke-width="21.924" stroke-linejoin="round" stroke-miterlimit="10" d="M455.3 779.9s59.7 7.7 86.6-15.9c-24.7-49.5-34.8-86.2-34.8-86.2l-51.8 102.1z"/></svg>
  </div>
  <a href="#content" class="offscreen" tabindex="1">Skip to Content</a>
  <ul class="nav">
    <li>
      <a href="/posts.html" title="A selection of blog posts, javascript, UX and design"  tabindex="2" data-type="page-transition">
        <svg viewBox="0 0 100 100" class="icon icon--inline icon--center icon__pen">
            <use xlink:href="/imgs/sprite/icon-sprite.svg#icon__pen"></use>
            <span tabindex="4">Blog</span>
        </svg>
      </a>
    </li>
    <li>
      <a href="/ux-process.html" title="View my UX process"  tabindex="3" data-type="page-transition">
        <svg viewBox="0 0 100 100" class="icon icon--inline icon--center icon__ux">
            <use xlink:href="/imgs/sprite/icon-sprite.svg#icon__ux"></use>
            <span tabindex="4">UX process</span>
        </svg>
      </a>
    </li>
    <li>
      <a href="/about.html" title="A weee bit about me"  tabindex="5" data-type="page-transition">
        <svg viewBox="0 0 100 100" class="icon icon--inline icon--center icon__about">
            <use xlink:href="/imgs/sprite/icon-sprite.svg#icon__about"></use>
            <span tabindex="4">About me</span>
        </svg>
      </a>
    </li>
    <!-- <li>
      <a href="/case-study.html" title="View a design and UX case study"  tabindex="4" data-type="page-transition">Case study</a>
    </li>
-->
    <!-- <li>
      <a href="mailto:info@willforsyth.co.uk" title="" tabindex="6">Contact</a>
    </li> -->
  </ul>
</nav>

  </header>
    <aside class="sidebar grid column column__12-of-12 column__4-of-12--small column__3-of-12--medium">
      <a class="back" href="/posts.html" title="back">Back</a>
    </aside>
    <section class="column column__12-of-12 column__8-of-12--small column__9-of-12--medium column__6-of-12--large">
      <article class="post__main" role="main">
        <h1 class="">Organising your javascript with modules</h1>
          <section class="post__content">
              <h2>Cleaning up our code</h2>

<p>To improve our code and ensure its all contained and will not be effected by other code we write. For this example we have something like this using document.ready and several functions. These are all available globally and on the window. So we need to use some methods to clean up our code.</p>

<h3>This is our code that needs some cleaning up</h3>

<p>In this example we are creating a modal using an a linked html file. The functionality is not that important its just so we can get an idea of how this process works.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript">  <span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>

    <span class="c1">// Our global variable</span>
    <span class="kd">var</span> <span class="nx">$modal</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"[rel='js-modal']"</span><span class="p">);</span>

    <span class="c1">// click handler that gets the html using ajax and replaces the content</span>
    <span class="nx">$</span><span class="p">(</span><span class="s2">".controls &gt; a"</span> <span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s2">"click"</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span>
      <span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>

      <span class="kd">var</span> <span class="nx">url</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"href"</span><span class="p">);</span>

      <span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span> <span class="p">{</span><span class="na">dataType</span><span class="p">:</span> <span class="s2">"text"</span><span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">contents</span><span class="p">){</span>
          <span class="nx">$modal</span><span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="nx">contents</span><span class="p">).</span><span class="nx">show</span><span class="p">();</span>
      <span class="p">});</span>
    <span class="p">})</span>

  <span class="p">});</span></code></pre></figure>

<h3>Here are the steps for this example</h3>

<p>Surround our code in a self invoking function.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">header</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
  <span class="p">...</span>
<span class="p">})();</span></code></pre></figure>

<p>I have moved the click handler function into its own function and then called on the event</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">headerClicks</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
  <span class="kd">var</span> <span class="nx">url</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"href"</span><span class="p">);</span>
  <span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span> <span class="p">{</span><span class="na">dataType</span><span class="p">:</span> <span class="s2">"text"</span><span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">contents</span><span class="p">){</span>
      <span class="nx">$modal</span><span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="nx">contents</span><span class="p">).</span><span class="nx">show</span><span class="p">();</span>
  <span class="p">});</span>
<span class="p">}</span></code></pre></figure>

<p>Create an init function and place our calls and variables in here</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">init</span><span class="p">(){</span>
    <span class="nx">$modal</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"[rel='js-modal']"</span><span class="p">);</span>
    <span class="nx">$</span><span class="p">(</span><span class="s2">"[rel='js-controls'] &gt; a"</span> <span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s2">"click"</span><span class="p">,</span> <span class="nx">headerClicks</span><span class="p">);</span>
<span class="p">}</span></code></pre></figure>

<p>Then to complete the closure I have returned the init</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="k">return</span> <span class="p">{</span>
  <span class="na">init</span><span class="p">:</span> <span class="nx">init</span>
<span class="p">}</span></code></pre></figure>

<p>Move the code initialisation to the bottom</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="nx">header</span><span class="p">.</span><span class="nx">init</span><span class="p">);</span></code></pre></figure>

<p>The final code</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript">  <span class="c1">// surround our code with a self invoking function</span>
  <span class="kd">var</span> <span class="nx">header</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span><span class="p">(){</span>

      <span class="kd">var</span> <span class="nx">$modal</span><span class="p">;</span>

      <span class="c1">// split the call handler into a new function and call on the click</span>
      <span class="kd">function</span> <span class="nx">headerClicks</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
        <span class="kd">var</span> <span class="nx">url</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"href"</span><span class="p">);</span>
        <span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span> <span class="p">{</span><span class="na">dataType</span><span class="p">:</span> <span class="s2">"text"</span><span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">contents</span><span class="p">){</span>
            <span class="nx">$modal</span><span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="nx">contents</span><span class="p">).</span><span class="nx">show</span><span class="p">();</span>
        <span class="p">});</span>
      <span class="p">}</span>

      <span class="c1">// move our initiation calls to an init function</span>
      <span class="kd">function</span> <span class="nx">init</span><span class="p">(){</span>
          <span class="nx">$modal</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"[rel='js-modal']"</span><span class="p">);</span>
          <span class="nx">$</span><span class="p">(</span><span class="s2">"[rel='js-controls'] &gt; a"</span> <span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s2">"click"</span><span class="p">,</span> <span class="nx">headerClicks</span><span class="p">);</span>
      <span class="p">}</span>

     <span class="c1">// using a closure return the init method ( dont call )</span>
      <span class="k">return</span> <span class="p">{</span>
        <span class="na">init</span><span class="p">:</span> <span class="nx">init</span>
      <span class="p">}</span>

  <span class="p">})();</span>


  <span class="c1">// move the document get ready to the bottom and call the moduled function and daisy chain the init.</span>
  <span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="nx">header</span><span class="p">.</span><span class="nx">init</span><span class="p">);</span></code></pre></figure>

<p>So I wanted to experiment making a quiz with the new things we have learned. Now since my javascript is not super nice yet I want to make as many small programme’s as I can do practice as much as I can.</p>

<p data-height="265" data-theme-id="0" data-slug-hash="EyGRBP" data-default-tab="html" data-user="willforsyth" data-embed-version="2" class="codepen">See the Pen <a href="http://codepen.io/willforsyth/pen/EyGRBP/">Quiz</a> by Will Forsyth (<a href="http://codepen.io/willforsyth">@willforsyth</a>) on <a href="http://codepen.io">CodePen</a>.</p>
<script async="" src="//assets.codepen.io/assets/embed/ei.js"></script>


              <div id="disqus_thread"></div>
<script>
(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');

s.src = '//willforsyth.disqus.com/embed.js';

s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>

          </section>
          <footer>
            
              <a class="post-prev" href="/tips/2016/07/19/html5-banner-ads.html">&laquo; HTML5 banner ads - Double Click</a>
            
            
              <a class="post-next" href="/javascript/2016/09/20/organising-javascript-calls.html">Scalable dom calls &raquo;</a>
            
          </footer>
        </article>
    </section>
    <footer role="contentinfo">
	<div class="column__center column column__12-of-12 column__10-of-12--medium">
		<div class="column column__12-of-12 column__6-of-12--medium">
			<h3 class="white">Get in touch</h3>
			<ul>
				<li>
					<a href="https://github.com/willforsyth" title="Git hub" tabindex="11">
						<svg viewBox="0 0 100 100" class="icon icon--inline icon__github">
						    <use xlink:href="/imgs/sprite/icon-sprite.svg#icon__github"></use>
						</svg>
						<span>github</span>
					</a>
				</li>
				<li>
					<a href="https://twitter.com/willforsyth" title="follow me" tabindex="12">
						<svg viewBox="0 0 100 100" class="icon icon--inline icon__twitter">
								<use xlink:href="/imgs/sprite/icon-sprite.svg#icon__twitter"></use>
						</svg>
						<span>twitter</span>
					</a>
				</li>
				<li>
					<a href="https://www.behance.net/willf" title="view some of my designs" tabindex="13">
						<svg viewBox="0 0 100 100" class="icon icon--inline icon__behance">
								<use xlink:href="/imgs/sprite/icon-sprite.svg#icon__behance"></use>
						</svg>
						<span>behance</span>
					</a>
				</li>
				<li>
					<a href="mailto:info@willforsyth.co.uk" title="email me" tabindex="13">
						<svg viewBox="0 0 100 100" class="icon icon--inline icon__mail">
								<use xlink:href="/imgs/sprite/icon-sprite.svg#icon__mail"></use>
						</svg>
						<span>info@willforsyth.co.uk</span>
					</a>
				</li>
			</ul>
		</div>
	</div>
</footer>
<small>&copy; willforsyth | 	<a href="/pattern.html" title="we have patterns">Pattern Library</a>
</small>



    <script data-require="leaflet@0.7.3" data-semver="0.7.3" src="http://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.3/leaflet.js"></script>
    <script src="/scripts/fuse-search.js"></script>
    <script src="/scripts/fuse-search-two.js"></script>
    <script src="/scripts/common.js"></script>
    <script src="/scripts/plugins.js"></script>

    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-78935405-1', 'auto');
  ga('send', 'pageview');

</script>

</body>
</html>
