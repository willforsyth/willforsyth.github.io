<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="initial-scale=1"><link rel="prefetch" href="/imgs/backgrounds/sky.jpg"><title>Setting up redux in react - Willforsyth</title><meta property="og:title" content="Setting up redux in react"/><meta name="description" content="Setting up redux in react"/><meta property="og:description" content="Setting up redux in react"/><link rel="canonical" href="willforsyth.co.uk/javascript/2016/11/11/react-redux.html"/><meta property="og:url" content="willforsyth.co.uk/javascript/2016/11/11/react-redux.html"/><meta property="og:site_name" content="Willforsyth"/><meta property="og:type" content="article"/><meta property="article:published_time" content="2016-11-11T00:00:00+00:00"/><meta name="twitter:card" content="summary"/><meta name="twitter:site" content="@willforsyth"/><meta name="twitter:creator" content="@Will Forsyth"/><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "BlogPosting",
    "headline": "Setting up redux in react",
    "datePublished": "2016-11-11T00:00:00+00:00",
    "description": "Setting up redux in react",
    "url": "willforsyth.co.uk/javascript/2016/11/11/react-redux.html"
  }</script><title>Setting up redux in react</title><link rel="stylesheet" media="all" href="/css/screen.css"><link data-require="leaflet@0.7.3" data-semver="0.7.3" rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.3/leaflet.css"/><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@willforsyth"><meta name="twitter:title" content="Setting up redux in react"><meta name="twitter:description" content="Setting up redux in react
"><meta name="twitter:image" content="http://willforsyth.co.uk"></head><body class="post--page"><header class="hdr hdr--post"><nav role="navigation"><div class="column logo"><a href="/" data-type="page-transition" title="Go to home page" tabindex="2"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1190.6 841.9" enable-background="new 0 0 1190.6 841.9"><g fill="#FAC580" stroke="#525D7D" stroke-linejoin="round" stroke-miterlimit="10"><path stroke-width="35.749" d="M589.2 759.4l-185.9-.2-54.6-78-58-134.8-47.7-143.5s-85.9-104.7-121.5-242.3c-26.7 3-71.2 9-71.2 9l47.5-140.7 261.1 20.9s91 85.8 101.9 141.6h128.5"/><path stroke-width="35.406" d="M588.9 759.4l182.3-.2 53.6-78 56.8-134.8 46.9-143.6s84.3-104.7 119.2-242.3c26.2 3 69.8 9 69.8 9l-46.6-140.6-256 20.9s-89.2 85.8-99.9 141.6h-126"/></g><path fill="#DF984A" stroke="#525D7D" stroke-width="35.571" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M1020.1 162.6l-233.1-69.7 23-44.5s107.4-45.1 258.4-19.2c32.1 58.7 71.5 153 71.5 153l-119.8-19.6z"/><path fill="#DF984A" stroke="#525D7D" stroke-width="35.901" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M105.1 152.4l245.6-91.4-254.1-34.8-43.6 133.1z"/><path stroke="#525D7D" stroke-width="30.664" stroke-linecap="round" stroke-miterlimit="10" d="M925.7 397.4s-60.3-116.6-99.6-140" fill="none"/><path stroke="#525D7D" stroke-width="35.901" stroke-linecap="round" stroke-miterlimit="10" d="M242.9 388.7s35.7-76.1 91.6-119.9" fill="none"/><ellipse fill="#525D7D" cx="402.2" cy="442" rx="61.8" ry="59.8"/><ellipse fill="#525D7D" cx="765.1" cy="440.6" rx="59.8" ry="59.7"/><path stroke="#525D7D" stroke-width="35.901" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M497.4 349.3s-35.9-34.7-92-14.5M801.8 321.3s-46.4-18.4-90.6 21.6" fill="none"/><path stroke="#525D7D" stroke-width="23.934" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M311.1 219.6c-3-1.5-45.6-81.5-45.6-81.5M876.5 206.6l26.3-51.3" fill="none"/><circle opacity=".42" fill="#fff" cx="406.1" cy="441.8" r="13.1"/><circle opacity=".42" fill="#fff" cx="761" cy="440.6" r="14"/><path fill="#DF984A" stroke="#525D7D" stroke-width="23.097" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M428.3 777.9s206.7 82.7 321.1-13.1l-151.4-32.2-169.7 45.3z"/><path fill="#DF984A" stroke="#525D7D" stroke-width="34.981" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M589.2 482.4c23.7 1.1 46.4 11.8 78.9 41.5 28.4 45.9 93.3 167.4 100.9 237.2-52.7 31.7-143 37.8-179.4-56"/><path fill="#DF984A" stroke="#525D7D" stroke-width="35.438" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M590.1 482.4c-24.4 1.1-46.4 11.6-79.8 41.2-29.2 45.8-96.1 167.2-103.9 237 54.1 31.8 146.7 38 184.2-55.7"/><path fill="#525D7D" stroke="#525D7D" stroke-width="11.967" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M566.5 688s33.9 32.2 61 0l32.2-47.4s5.1-47.4-20.3-50.8c-88.1 8.5-99.9 0-99.9 0s-27.1 33.9 0 66l27 32.2z"/><ellipse transform="matrix(.997 -.078 .078 .997 -47.549 48.305)" opacity=".42" fill="#fff" cx="592.8" cy="631.1" rx="13.4" ry="6.9"/><path fill="#fff" stroke="#525D7D" stroke-width="21.924" stroke-linejoin="round" stroke-miterlimit="10" d="M455.3 779.9s59.7 7.7 86.6-15.9c-24.7-49.5-34.8-86.2-34.8-86.2l-51.8 102.1z"/></svg></a></div><a href="#content" class="offscreen" tabindex="1">Skip to Content</a><ul class="nav"><li><a href="/posts.html" title="A selection of blog posts, javascript, UX and design" tabindex="2" data-type="page-transition"><svg viewBox="0 0 100 100" class="icon icon--inline icon--center icon__pen"><use xlink:href="/imgs/sprite/icon-sprite.svg#icon__pen"></use><span tabindex="4">Blog</span></svg></a></li><li><a href="/ux-process.html" title="View my UX process" tabindex="3" data-type="page-transition"><svg viewBox="0 0 100 100" class="icon icon--inline icon--center icon__ux"><use xlink:href="/imgs/sprite/icon-sprite.svg#icon__ux"></use><span tabindex="4">UX process</span></svg></a></li><li><a href="/about.html" title="A weee bit about me" tabindex="5" data-type="page-transition"><svg viewBox="0 0 100 100" class="icon icon--inline icon--center icon__about"><use xlink:href="/imgs/sprite/icon-sprite.svg#icon__about"></use><span tabindex="4">About me</span></svg></a></li></ul></nav></header><aside class="sidebar grid column column__12-of-12 column__4-of-12--small column__3-of-12--medium"><a class="back" href="/posts.html" title="back">Back</a></aside><section class="column column__12-of-12 column__8-of-12--small column__9-of-12--medium column__6-of-12--large"><article class="post__main" role="main"><h1 class="">Setting up redux in react</h1><section class="post__content"><p>Redux is made up of actions, reducers, store and connect</p><h3>Constructor</h3><p>Add the constructor function to the top of the class component and set some state</p><p>Example</p><figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">constructor</span><span class="p">(</span><span class="nx">props</span><span class="p">,</span> <span class="nx">context</span><span class="p">){</span>
	<span class="kr">super</span><span class="p">(</span><span class="nx">props</span><span class="p">,</span> <span class="nx">context</span><span class="p">);</span>

	<span class="k">this</span><span class="p">.</span><span class="nx">state</span> <span class="o">=</span> <span class="p">{</span>
	  <span class="na">example</span><span class="p">:</span> <span class="p">{</span><span class="na">title</span><span class="p">:</span> <span class="s2">""</span><span class="p">}</span>
<span class="p">};</span></code></pre></figure><p>Getting a property ‘state’ not defined on events? You need to bind this.</p><figure class="highlight"><pre><code class="language-javascript" data-lang="javascript">  <span class="k">this</span><span class="p">.</span><span class="nx">oneChange</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">onChange</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">onClick</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">onClick</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">);</span></code></pre></figure><h3>Action creator</h3><p>Create a file called actions and save actions files here.</p><figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">nameOfAction</span><span class="p">(</span><span class="nx">rating</span><span class="p">){</span>
  <span class="k">return</span> <span class="p">{</span><span class="na">type</span><span class="p">:</span> <span class="nx">NAME_OF_ACTION</span><span class="p">,</span> <span class="na">example</span><span class="p">:</span> <span class="nx">title</span>  <span class="p">}</span>
<span class="p">}</span></code></pre></figure><h3>Reducer</h3><p>Create a file called reducers and save reducer files here. - object.assign() keeps the store immutable - … splits the object and allows us to assign a new value</p><figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">theReducer</span><span class="p">(</span><span class="nx">state</span> <span class="o">=</span> <span class="p">[],</span> <span class="nx">action</span><span class="p">){</span>
   <span class="k">switch</span><span class="p">(</span><span class="nx">action</span><span class="p">.</span><span class="nx">type</span><span class="p">){</span>
      <span class="k">case</span> <span class="s1">'NAME_OF_ACTION'</span><span class="p">;</span>
      <span class="k">return</span> <span class="p">[...</span><span class="nx">state</span><span class="p">,</span>
        <span class="nb">Object</span><span class="p">.</span><span class="nx">assign</span><span class="p">({},</span> <span class="nx">action</span><span class="p">.</span><span class="nx">newContent</span><span class="p">)</span>
      <span class="p">];</span>
    <span class="nl">default</span><span class="p">:</span>
      <span class="k">return</span> <span class="nx">state</span><span class="p">;</span>
   <span class="p">}</span>
<span class="p">}</span></code></pre></figure><p>Combine reducers Save this is the reducers file and name it index.js</p><figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kr">import</span> <span class="p">{</span><span class="nx">combineReducers</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">'redux'</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">courses</span> <span class="nx">from</span> <span class="s1">'./theReducer'</span><span class="p">;</span></code></pre></figure><figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kr">const</span> <span class="nx">rootReducer</span> <span class="o">=</span> <span class="nx">combineReducers</span> <span class="p">({</span>
  <span class="nx">theReducer</span>
  <span class="c1">// other reducers</span>
<span class="p">});</span>

<span class="kr">export</span> <span class="k">default</span> <span class="nx">rootReducer</span><span class="p">;</span></code></pre></figure><h3>Redux store</h3><p>Next we need to create the redux store. Create a folder called store and a configStore file. This is where we createStore and set the initial state.</p><figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kr">import</span> <span class="p">{</span><span class="nx">createStore</span><span class="p">,</span> <span class="nx">applyMiddleware</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">'redux'</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">rootReducer</span> <span class="nx">from</span> <span class="s1">'../reducers'</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">reduxImmutableStateInvariant</span> <span class="nx">from</span> <span class="s1">'redux-immutable-state-invariant'</span><span class="p">;</span>

<span class="kr">export</span> <span class="k">default</span> <span class="kd">function</span> <span class="nx">configureStore</span><span class="p">(</span><span class="nx">initialState</span><span class="p">){</span>
  <span class="k">return</span> <span class="nx">createStore</span><span class="p">(</span>
    <span class="nx">rootReducer</span><span class="p">,</span>
    <span class="nx">initialState</span><span class="p">,</span>
    <span class="nx">applyMiddleware</span><span class="p">(</span><span class="nx">reduxImmutableStateInvariant</span><span class="p">())</span>
  <span class="p">);</span>
<span class="p">}</span></code></pre></figure><h3>Link up the redux parts</h3><p>In index.js we now need to set up some bits.</p><figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kr">import</span> <span class="nx">configureStore</span> <span class="nx">from</span> <span class="s1">'./store/configureStore'</span><span class="p">;</span></code></pre></figure><figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kr">const</span> <span class="nx">store</span> <span class="o">=</span> <span class="nx">configureStore</span><span class="p">();</span></code></pre></figure><p>import provider</p><figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kr">import</span> <span class="p">{</span><span class="nx">Provider</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">'react-redux'</span><span class="p">;</span></code></pre></figure><p>Wrap routes in provider</p><figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="o">&lt;</span><span class="nx">Provider</span> <span class="nx">store</span><span class="o">=</span><span class="p">{</span><span class="nx">store</span><span class="p">}</span><span class="o">&gt;</span>
	<span class="o">&lt;</span><span class="nx">Router</span> <span class="nx">routes</span><span class="o">=</span><span class="p">{</span><span class="nx">routes</span><span class="p">};</span> <span class="sr">/</span><span class="err">&gt;
</span><span class="o">&lt;</span><span class="sr">/Provider&gt;</span><span class="err">,
</span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'app'</span><span class="p">);</span></code></pre></figure><p>This is the basics of redux now set up and only needs to be set up once.</p><h3>Hook up a component into redux using connect</h3><p>Connect is used to connect to the store from our components so they can interact with redux</p><figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kr">import</span> <span class="p">{</span><span class="nx">connect</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">'react-redux'</span>
<span class="kr">import</span> <span class="o">*</span> <span class="nx">nameOfAction</span> <span class="nx">from</span> <span class="s1">'../../actions/nameOfAction'</span></code></pre></figure><p>Change the export default call to:</p><figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kr">export</span> <span class="k">default</span> <span class="nx">connect</span><span class="p">()(</span><span class="nx">yourPage</span><span class="p">);</span></code></pre></figure><p>It takes two parameters, mapStatetoProps and mapDispatchToProps</p><figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kr">export</span> <span class="k">default</span> <span class="nx">connect</span><span class="p">(</span><span class="nx">mapStatetoProps</span><span class="p">,</span> <span class="nx">mapDispatchToProps</span><span class="p">)(</span><span class="nx">yourPage</span><span class="p">);</span></code></pre></figure><p>Now we need to create the function, it takes two parameters state and ownProps. We return the properties that we want to make available. So we are setting the state to props so we can use in the page functionality.</p><figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">mapStateToProps</span><span class="p">(</span><span class="nx">state</span><span class="p">,</span> <span class="nx">ownProps</span><span class="p">){</span>
  <span class="k">return</span><span class="p">{</span>
    <span class="na">title</span><span class="p">:</span> <span class="nx">state</span><span class="p">.</span><span class="nx">title</span>
  <span class="p">};</span>
<span class="p">}</span></code></pre></figure><p>mapDispatchToProps lets us expose which dispatch methods we want to have available. Leaving it of leaves all dispatches available.</p><p>Now we can dispatch a action. dispatch then the name of the action and what you want to pass in.</p><figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">dispatch</span><span class="p">(</span><span class="nx">nameOfAction</span><span class="p">.</span><span class="nx">nameOfAction</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">title</span><span class="p">))</span></code></pre></figure><p>This is the basics of redux. A good addition to redux is the redux dev tool :-)</p><div id="disqus_thread"></div><script>(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');

s.src = '//willforsyth.disqus.com/embed.js';

s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();</script></section><footer><a class="post-prev" href="/javascript/2016/10/11/webpack-basic-setup.html">&laquo; Webpack basic set up with ES6</a> <a class="post-next" href="/ux/2016/11/25/UX-prototype-framer.html">UX prototypes with framer &raquo;</a></footer></article></section><footer role="contentinfo"><div class="column__center column column__12-of-12 column__10-of-12--medium"><div class="column column__12-of-12 column__6-of-12--medium"><h3 class="white">Get in touch</h3><ul><li><a href="https://github.com/willforsyth" title="Git hub" tabindex="11"><svg viewBox="0 0 100 100" class="icon icon--inline icon__github"><use xlink:href="/imgs/sprite/icon-sprite.svg#icon__github"></use></svg> <span>github</span></a></li><li><a href="https://twitter.com/willforsyth" title="follow me" tabindex="12"><svg viewBox="0 0 100 100" class="icon icon--inline icon__twitter"><use xlink:href="/imgs/sprite/icon-sprite.svg#icon__twitter"></use></svg> <span>twitter</span></a></li><li><a href="https://www.behance.net/willf" title="view some of my designs" tabindex="13"><svg viewBox="0 0 100 100" class="icon icon--inline icon__behance"><use xlink:href="/imgs/sprite/icon-sprite.svg#icon__behance"></use></svg> <span>behance</span></a></li><li><a href="mailto:info@willforsyth.co.uk" title="email me" tabindex="13"><svg viewBox="0 0 100 100" class="icon icon--inline icon__mail"><use xlink:href="/imgs/sprite/icon-sprite.svg#icon__mail"></use></svg> <span>info@willforsyth.co.uk</span></a></li></ul></div></div></footer><small>&copy; willforsyth | <a href="/pattern.html" title="we have patterns">Pattern Library</a></small><script data-require="leaflet@0.7.3" data-semver="0.7.3" src="http://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.3/leaflet.js"></script><script src="/scripts/fuse-search.js"></script><script src="/scripts/fuse-search-two.js"></script><script src="/scripts/common.js"></script><script src="/scripts/plugins.js"></script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-78935405-1', 'auto');
  ga('send', 'pageview');</script></body></html>