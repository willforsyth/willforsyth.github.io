<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="initial-scale=1"><link rel="prefetch" href="/imgs/backgrounds/sky.jpg"><title>Setting up redux in react - Willforsyth</title><meta property="og:title" content="Setting up redux in react"/><meta name="description" content="Setting up redux in react"/><meta property="og:description" content="Setting up redux in react"/><link rel="canonical" href="willforsyth.co.uk/javascript/2016/11/11/react-redux.html"/><meta property="og:url" content="willforsyth.co.uk/javascript/2016/11/11/react-redux.html"/><meta property="og:site_name" content="Willforsyth"/><meta property="og:type" content="article"/><meta property="article:published_time" content="2016-11-11T00:00:00+00:00"/><meta name="twitter:card" content="summary"/><meta name="twitter:site" content="@willforsyth"/><meta name="twitter:creator" content="@Will Forsyth"/><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "BlogPosting",
    "headline": "Setting up redux in react",
    "datePublished": "2016-11-11T00:00:00+00:00",
    "description": "Setting up redux in react",
    "url": "willforsyth.co.uk/javascript/2016/11/11/react-redux.html"
  }</script><title>Setting up redux in react</title><link rel="stylesheet" media="all" href="/css/screen.css"><link data-require="leaflet@0.7.3" data-semver="0.7.3" rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.3/leaflet.css"/></head><body class="post--page"><header class="hdr hdr--post"><div id="particles"></div><div class="column column__center column__12-of-12 column__8-of-12--small column__9-of-12--medium column__7-of-12--large hdr--cont"><nav role="navigation"><div class="column"><a href="/" data-type="page-transition" title="Go to home page" tabindex="2"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 250 156.493" class="icon__logo"><defs><linearGradient id="a" gradientUnits="userSpaceOnUse" x1="206.731" y1="221.727" x2="-1.028" y2="31.393"><stop offset="0" stop-color="#ffffff"/><stop offset="1" stop-color="#c1c1c1"/></linearGradient><linearGradient id="b" gradientUnits="userSpaceOnUse" x1="213.577" y1="184.298" x2="12.329" y2="-.072"><stop offset="0" stop-color="#ffffff"/><stop offset="1" stop-color="#c1c1c1"/></linearGradient><linearGradient id="c" gradientUnits="userSpaceOnUse" x1="242.991" y1="115.523" x2="67.21" y2="-45.514"><stop offset="0" stop-color="#ffffff"/><stop offset="1" stop-color="#c1c1c1"/></linearGradient></defs><path fill-rule="evenodd" clip-rule="evenodd" fill="url(#a)" d="M52.781 138.867s-23.137-49.161-30.066-64.425c-6.396-14.089-12.971-28.098-19.15-42.28-5.982-13.731-1.812-23.5 9.389-29.015 11.127-5.478 23.005-.147 28.658 12.263 8.212 18.025 35.936 65.438 35.936 65.438"/><path opacity=".05" fill-rule="evenodd" clip-rule="evenodd" fill="#0D3147" d="M45.202 122.736l25.714-53.351 7.303 11.888-25.438 57.594z"/><path fill-rule="evenodd" clip-rule="evenodd" fill="url(#b)" d="M178.829 84.054c-9.926 15.236-14.885 34.075-23.668 50.27-7.44-16.082-22.345-44.75-29.982-61.259-2.081 4.206-3.529 6.943-4.812 9.754-9.103 19.925-18.168 39.867-27.252 59.8-4.544 9.971-13.403 15.199-23.001 13.584-10.003-1.684-16.62-9.557-18.102-20.479-.6-4.416-.004-7.83 2.704-11.426 2.11-2.805 3.141-6.422 4.642-9.682 15.402-33.439 30.755-66.899 46.231-100.305 5.232-11.297 15.955-16.051 27.121-11.468 3.928 1.612 9.405 10.25 9.868 11.282 8.873 19.77 27.713 50.886 36.251 69.929z"/><path opacity=".05" fill-rule="evenodd" clip-rule="evenodd" fill="#0D3147" d="M149.537 121.766l23.294-49.942s4.895 11.107 5.615 11.129l-22.043 53.915-6.866-15.102z"/><path fill-rule="evenodd" clip-rule="evenodd" fill="url(#c)" d="M155.021 134.34c1.014-3.203 1.705-6.557 3.093-9.588 16.714-36.55 33.517-73.062 50.334-109.565 5.82-12.631 17.767-17.226 30.049-11.671 9.87 4.463 13.58 17.048 8.213 28.872-16.858 37.137-33.802 74.235-50.778 111.317-4.468 9.76-14.294 14.572-24.222 12.135-9.535-2.342-16.306-11.295-16.689-21.5z"/></svg></a></div><a href="#content" class="offscreen" tabindex="1">Skip to Content</a><ul class="nav"><li><a href="/posts.html" title="A selection of blog posts, javascript, UX and design" tabindex="2" data-type="page-transition">Blog</a></li><li><a href="/ux-process.html" title="View my UX process" tabindex="3" data-type="page-transition">UX process</a></li><li><a href="mailto:info@willforsyth.co.uk" title="" tabindex="6">Contact</a></li></ul></nav><div><h1 class="">Setting up redux in react</h1></div></div></header><div class="sidebar grid column column__12-of-12 column__4-of-12--small column__3-of-12--medium"><a class="back" href="/posts.html" title="back">Back</a></div><main class="column column__12-of-12 column__8-of-12--small column__9-of-12--medium column__6-of-12--large"><article class="post__main" role="main"><section class="post__content"><p>Redux is made up of actions, reducers, store and connect</p><h3>Constructor</h3><p>Add the constructor function to the top of the class component and set some state</p><p>Example</p><figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">constructor</span><span class="p">(</span><span class="nx">props</span><span class="p">,</span> <span class="nx">context</span><span class="p">){</span>
	<span class="kr">super</span><span class="p">(</span><span class="nx">props</span><span class="p">,</span> <span class="nx">context</span><span class="p">);</span>

	<span class="k">this</span><span class="p">.</span><span class="nx">state</span> <span class="o">=</span> <span class="p">{</span>
	  <span class="na">example</span><span class="p">:</span> <span class="p">{</span><span class="na">title</span><span class="p">:</span> <span class="s2">""</span><span class="p">}</span>
<span class="p">};</span></code></pre></figure><p>Getting a property ‘state’ not defined on events? You need to bind this.</p><figure class="highlight"><pre><code class="language-javascript" data-lang="javascript">  <span class="k">this</span><span class="p">.</span><span class="nx">oneChange</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">onChange</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">onClick</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">onClick</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">);</span></code></pre></figure><h3>Action creator</h3><p>Create a file called actions and save actions files here.</p><figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">nameOfAction</span><span class="p">(</span><span class="nx">rating</span><span class="p">){</span>
  <span class="k">return</span> <span class="p">{</span><span class="na">type</span><span class="p">:</span> <span class="nx">NAME_OF_ACTION</span><span class="p">,</span> <span class="na">example</span><span class="p">:</span> <span class="nx">title</span>  <span class="p">}</span>
<span class="p">}</span></code></pre></figure><h3>Reducer</h3><p>Create a file called reducers and save reducer files here. - object.assign() keeps the store immutable - … splits the object and allows us to assign a new value</p><figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">theReducer</span><span class="p">(</span><span class="nx">state</span> <span class="o">=</span> <span class="p">[],</span> <span class="nx">action</span><span class="p">){</span>
   <span class="k">switch</span><span class="p">(</span><span class="nx">action</span><span class="p">.</span><span class="nx">type</span><span class="p">){</span>
      <span class="k">case</span> <span class="s1">'NAME_OF_ACTION'</span><span class="p">;</span>
      <span class="k">return</span> <span class="p">[...</span><span class="nx">state</span><span class="p">,</span>
        <span class="nb">Object</span><span class="p">.</span><span class="nx">assign</span><span class="p">({},</span> <span class="nx">action</span><span class="p">.</span><span class="nx">newContent</span><span class="p">)</span>
      <span class="p">];</span>
    <span class="nl">default</span><span class="p">:</span>
      <span class="k">return</span> <span class="nx">state</span><span class="p">;</span>
   <span class="p">}</span>
<span class="p">}</span></code></pre></figure><p>Combine reducers Save this is the reducers file and name it index.js</p><figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kr">import</span> <span class="p">{</span><span class="nx">combineReducers</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">'redux'</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">courses</span> <span class="nx">from</span> <span class="s1">'./theReducer'</span><span class="p">;</span></code></pre></figure><figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kr">const</span> <span class="nx">rootReducer</span> <span class="o">=</span> <span class="nx">combineReducers</span> <span class="p">({</span>
  <span class="nx">theReducer</span>
  <span class="c1">// other reducers</span>
<span class="p">});</span>

<span class="kr">export</span> <span class="k">default</span> <span class="nx">rootReducer</span><span class="p">;</span></code></pre></figure><h3>Redux store</h3><p>Next we need to create the redux store. Create a folder called store and a configStore file. This is where we createStore and set the initial state.</p><figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kr">import</span> <span class="p">{</span><span class="nx">createStore</span><span class="p">,</span> <span class="nx">applyMiddleware</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">'redux'</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">rootReducer</span> <span class="nx">from</span> <span class="s1">'../reducers'</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">reduxImmutableStateInvariant</span> <span class="nx">from</span> <span class="s1">'redux-immutable-state-invariant'</span><span class="p">;</span>

<span class="kr">export</span> <span class="k">default</span> <span class="kd">function</span> <span class="nx">configureStore</span><span class="p">(</span><span class="nx">initialState</span><span class="p">){</span>
  <span class="k">return</span> <span class="nx">createStore</span><span class="p">(</span>
    <span class="nx">rootReducer</span><span class="p">,</span>
    <span class="nx">initialState</span><span class="p">,</span>
    <span class="nx">applyMiddleware</span><span class="p">(</span><span class="nx">reduxImmutableStateInvariant</span><span class="p">())</span>
  <span class="p">);</span>
<span class="p">}</span></code></pre></figure><h3>Link up the redux parts</h3><p>In index.js we now need to set up some bits.</p><figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kr">import</span> <span class="nx">configureStore</span> <span class="nx">from</span> <span class="s1">'./store/configureStore'</span><span class="p">;</span></code></pre></figure><figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kr">const</span> <span class="nx">store</span> <span class="o">=</span> <span class="nx">configureStore</span><span class="p">();</span></code></pre></figure><p>import provider</p><figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kr">import</span> <span class="p">{</span><span class="nx">Provider</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">'react-redux'</span><span class="p">;</span></code></pre></figure><p>Wrap routes in provider</p><figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="o">&lt;</span><span class="nx">Provider</span> <span class="nx">store</span><span class="o">=</span><span class="p">{</span><span class="nx">store</span><span class="p">}</span><span class="o">&gt;</span>
	<span class="o">&lt;</span><span class="nx">Router</span> <span class="nx">routes</span><span class="o">=</span><span class="p">{</span><span class="nx">routes</span><span class="p">};</span> <span class="sr">/</span><span class="err">&gt;
</span><span class="o">&lt;</span><span class="sr">/Provider&gt;</span><span class="err">,
</span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'app'</span><span class="p">);</span></code></pre></figure><p>This is the basics of redux now set up and only needs to be set up once.</p><h3>Hook up a component into redux using connect</h3><p>Connect is used to connect to the store from our components so they can interact with redux</p><figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kr">import</span> <span class="p">{</span><span class="nx">connect</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">'react-redux'</span>
<span class="kr">import</span> <span class="o">*</span> <span class="nx">nameOfAction</span> <span class="nx">from</span> <span class="s1">'../../actions/nameOfAction'</span></code></pre></figure><p>Change the export default call to:</p><figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kr">export</span> <span class="k">default</span> <span class="nx">connect</span><span class="p">()(</span><span class="nx">yourPage</span><span class="p">);</span></code></pre></figure><p>It takes two parameters, mapStatetoProps and mapDispatchToProps</p><figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kr">export</span> <span class="k">default</span> <span class="nx">connect</span><span class="p">(</span><span class="nx">mapStatetoProps</span><span class="p">,</span> <span class="nx">mapDispatchToProps</span><span class="p">)(</span><span class="nx">yourPage</span><span class="p">);</span></code></pre></figure><p>Now we need to create the function, it takes two parameters state and ownProps. We return the properties that we want to make available. So we are setting the state to props so we can use in the page functionality.</p><figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">mapStateToProps</span><span class="p">(</span><span class="nx">state</span><span class="p">,</span> <span class="nx">ownProps</span><span class="p">){</span>
  <span class="k">return</span><span class="p">{</span>
    <span class="na">title</span><span class="p">:</span> <span class="nx">state</span><span class="p">.</span><span class="nx">title</span>
  <span class="p">};</span>
<span class="p">}</span></code></pre></figure><p>mapDispatchToProps lets us expose which dispatch methods we want to have available. Leaving it of leaves all dispatches available.</p><p>Now we can dispatch a action. dispatch then the name of the action and what you want to pass in.</p><figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">dispatch</span><span class="p">(</span><span class="nx">nameOfAction</span><span class="p">.</span><span class="nx">nameOfAction</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">title</span><span class="p">))</span></code></pre></figure><p>This is the basics of redux. A good addition to redux is the redux dev tool :-)</p><div id="disqus_thread"></div><script>(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');

s.src = '//willforsyth.disqus.com/embed.js';

s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();</script></section><footer><a class="post-prev" href="/javascript/2016/10/11/webpack-basic-setup.html">&laquo; Webpack basic set up with ES6</a> <a class="post-next" href="/ux/2016/11/25/UX-prototype-framer.html">UX prototypes with framer &raquo;</a></footer></article></main><footer role="contentinfo"><div class="column column__center column__12-of-12 column__8-of-12--medium column__9-of-12--medium"><h3 class="white">Get in contact</h3><ul><li><a href="https://github.com/willforsyth" title="Git hub" tabindex="11"><svg viewBox="0 0 100 100" class="icon icon--inline icon__github"><use xlink:href="/imgs/sprite/icon-sprite.svg#icon__github"></use></svg> <span>github</span></a></li><li><a href="https://twitter.com/willforsyth" title="follow me" tabindex="12"><svg viewBox="0 0 100 100" class="icon icon--inline icon__twitter"><use xlink:href="/imgs/sprite/icon-sprite.svg#icon__twitter"></use></svg> <span>twitter</span></a></li><li><a href="https://www.behance.net/willf" title="view some of my designs" tabindex="13"><svg viewBox="0 0 100 100" class="icon icon--inline icon__behance"><use xlink:href="/imgs/sprite/icon-sprite.svg#icon__behance"></use></svg> <span>behance</span></a></li><li><a href="mailto:info@willforsyth.co.uk" title="email me" tabindex="13"><svg viewBox="0 0 100 100" class="icon icon--inline icon__mail"><use xlink:href="/imgs/sprite/icon-sprite.svg#icon__mail"></use></svg> <span>info@willforsyth.co.uk</span></a></li></ul></div></footer><small>&copy; willforsyth | <a href="/pattern.html" title="we have patterns">Pattern Library</a></small><script data-require="leaflet@0.7.3" data-semver="0.7.3" src="http://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.3/leaflet.js"></script><script src="/scripts/fuse-search.js"></script><script src="/scripts/fuse-search-two.js"></script><script src="/scripts/common.js"></script><script src="/scripts/plugins.js"></script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-78935405-1', 'auto');
  ga('send', 'pageview');</script></body></html>